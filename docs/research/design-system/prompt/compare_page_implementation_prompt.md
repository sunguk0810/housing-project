# /compare 페이지 구현 플랜 요청 프롬프트 (Claude Code용)

> **사용 방법**: 아래 프롬프트를 Claude Code에 전달할 때,
> 참조 파일들을 프로젝트 내에 배치한 후 사용하세요.

---

## 사전 준비: 파일 배치

```
docs/design-system/
├── DESIGN_SYSTEM.md              ← 디자인 시스템 전체 명세 (SoT)
├── design-tokens.css             ← CSS 토큰 정의
├── design_brief.md               ← 통합 디자인 브리프 (§5-4 비교 화면 설계)

docs/research/design-system/
├── ref_6-1_compare_page_analysis.md      ← 비교 페이지 분석
├── ref_2-1_circular_gauge_analysis.md    ← 게이지/등급 분석 (미니 게이지 재참조)
├── ref_4-1_property_card_analysis.md     ← 카드 분석 (비교 헤더 카드 참조)
└── images/
    └── apple_desktop_compare.png
```

---

## 프롬프트

```
# /compare 페이지 구현 플랜 작성

## 컨텍스트

지금부터 집콕신혼 서비스의 `/compare` (단지 비교) 페이지 구현 플랜을 작성해줘.
이 페이지는 사용자가 `/results`에서 "비교에 추가"한 2-3개 단지를 나란히 놓고
스펙을 행(row)별로 비교하는 화면이야.
Apple "Mac 모델 비교하기" 구조를 기반으로 하되,
레이더 차트 오버레이와 차이 하이라이트를 추가해야 해.

## 페이지 핵심 구조

- **비교 헤더**: 단지별 미니 게이지 + 등급 + 이름 + 주소 (sticky)
- **레이더 차트**: 2-3개 단지의 4축(예산/통근/보육/안전) 오버레이
- **"한눈에 비교" 섹션**: 종합등급, 가격, 통근시간 큰 수치 나란히
- **카테고리별 상세 비교**: 예산/통근/보육/안전 섹션별 행 비교
- **단지 추가/제거**: 동적으로 비교 대상 관리 (최소 2, 최대 3)
- **CTA**: "이 단지 선택하기" / "보드에 저장"

## 반드시 읽어야 할 파일 (순서대로)

1. `docs/design-system/DESIGN_SYSTEM.md` — 디자인 시스템 전체 명세 (SoT)
2. `docs/design-system/design-tokens.css` — CSS 토큰 정의
3. `docs/design-system/design_brief.md` — §5-4 비교 화면 설계
4. `docs/research/design-system/ref_6-1_compare_page_analysis.md` — 비교 페이지 레퍼런스 분석
5. `docs/research/design-system/ref_2-1_circular_gauge_analysis.md` — 게이지 레퍼런스 (미니 게이지 참조)
6. `docs/research/design-system/ref_4-1_property_card_analysis.md` — 카드 레퍼런스 (헤더 카드 참조)
7. `docs/research/design-system/images/` — 레퍼런스 스크린샷

## 플랜 작성 규칙

### 구조

플랜은 다음 구조로 작성해:

1. **컴포넌트 트리**: /compare 페이지를 구성하는 전체 컴포넌트 계층도
2. **구현 순서**: 의존성 기반으로 어떤 컴포넌트를 먼저 만들어야 하는지
3. **비교 헤더 (sticky) 상세**:
   - 단지별 미니 게이지(36-48px) + 등급 라벨 + 단지명
   - 2-3컬럼 레이아웃 (동적)
   - sticky 동작 (스크롤 시 상단 고정)
   - "× 제거" 버튼 (각 단지)
   - "+ 단지 추가" 점선 카드 (빈 컬럼)
4. **레이더 차트 섹션**:
   - Recharts RadarChart 사용
   - 4축: 예산 / 통근 / 보육 / 안전
   - 2-3개 단지 오버레이 (compare-1/2/3 컬러: #0891B2 / #F97316 / #8B5CF6)
   - 범례 (단지명 + 컬러)
   - 반응형 크기 (모바일: 280px, 데스크톱: 360px)
5. **"한눈에 비교" 섹션** (Apple 패턴):
   - 핵심 스펙 큰 수치(~28px Bold) 나란히
   - 비교 행: 종합등급 / 매매가격 / 통근시간 / 세대수 / 준공연도
   - **차이 하이라이트**: 가장 좋은 값에 score-*-subtle 배경색 적용
   - 라벨은 값 아래 작게 회색
6. **카테고리별 상세 비교 섹션**:
   - 섹션 타이틀(~20px Bold) + 넉넉한 여백(48px)로 구분
   - 각 카테고리의 점수 + 등급 + 핵심 수치 행별 비교
   - 예산: 매매가/전세가/대출부담률/월상환액
   - 통근: 직장1 시간/직장2 시간/환승횟수
   - 보육: 어린이집 수/유치원 수/초등학교 거리
   - 안전: CPTED 등급/범죄율/소방서 거리
7. **비교 대상 관리**:
   - 추가: "+ 단지 추가" → 모달/드로어에서 /results 리스트 선택
   - 제거: "× 제거" → 확인 없이 즉시 (undo 가능)
   - 상태: URL searchParams로 관리 (?ids=123,456,789)
   - 최소 2개 필수, 1개가 되면 /detail로 리다이렉트
8. **반응형 전환**:
   - 데스크톱(1024px+): 3컬럼 나란히 (Apple 패턴)
   - 모바일(1024px 미만): 2컬럼 + 3번째 좌우 스크롤
   - 컬럼 너비: 균등 분할 (flex-1 또는 grid)
9. **CTA 영역**:
   - 하단 고정 또는 헤더 내
   - "이 단지 선택하기" / "보드에 저장"
10. **데이터 흐름**: URL params → API 호출 → 컴포넌트 데이터
11. **검증 체크리스트**

### 디자인 원칙 (위반 금지)

- **색상/간격/타이포**: 반드시 `design-tokens.css`의 CSS Custom Property 사용
- **Tailwind 클래스**: `DESIGN_SYSTEM.md` §6.3의 패턴 준수
- **컴플라이언스**: `DESIGN_SYSTEM.md` §5의 금지 용어/표현 절대 사용 금지
  - "추천 단지" → "비교 대상 단지"
  - 순위 매기기 금지 → 나란히 비교만 (1등/2등 표현 없음)
- **접근성**: 점수 시각화에 색상만 사용 금지 → 텍스트 라벨 병행 필수
- **비교 컬러**: compare-1(#0891B2) / compare-2(#F97316) / compare-3(#8B5CF6)
- **차이 하이라이트**: 가장 좋은 값에 해당 등급의 `-subtle` 배경색, 절대 순위/랭킹 표현 아님

### 레퍼런스 적용 규칙

`ref_6-1_compare_page_analysis.md`의 "Agent 전달용 요약" 섹션을 확인하고:
- **"가져올 것"** 항목 → 구현에 반영
  - 특히: "한눈에 보기" 큰 수치, 섹션+여백 구분, 3컬럼 상단 정렬
- **"무시할 것"** 항목 → 절대 따라가지 않기
  - 특히: 차이 비강조(Apple 방식), sticky 헤더 없음, 제품 사진
- **"Apple에 없지만 우리에게 필요한 것"** → 반드시 플랜에 포함
  - 레이더 차트, 차이 하이라이트, 동적 추가/제거, sticky 헤더, 모바일 2컬럼

### 기술 제약

- Next.js 16.x App Router (RSC + Client Component 구분 명시)
- React 19 + TypeScript strict
- Tailwind CSS v4 (`@theme` 토큰 사용)
- shadcn/ui 컴포넌트 활용 가능
- 레이더 차트: Recharts RadarChart
- 점수 게이지: 순수 SVG — /results의 CircularGauge 재사용 (미니 사이즈)
- 상태 관리: URL searchParams (?ids=123,456,789)
- 스크롤 동기화: 모바일 가로 스크롤 시 헤더-콘텐츠 동기화 필요

## 기대 산출물

1. `/compare` 페이지의 **컴포넌트 트리 + 파일 구조**
2. **비교 헤더 (sticky)** 구현 상세 (게이지, 추가/제거, 동적 컬럼)
3. **레이더 차트** 구현 상세 (Recharts 설정, 축, 오버레이, 범례)
4. **"한눈에 비교" 섹션** 구현 상세 (큰 수치, 차이 하이라이트)
5. **카테고리별 상세 비교** 각각의 행 구조
6. **반응형 전환** 명세 (데스크톱 3컬럼 ↔ 모바일 2컬럼+스크롤)
7. **비교 대상 관리** UX 흐름 (추가/제거/최소2/최대3)
8. **구현 순서** (단계별, 의존성 표시)
9. **검증 체크리스트** (디자인 토큰, 컴플라이언스, 접근성, 비교 컬러)

플랜만 작성하고, 코드 구현은 하지 마. 플랜 승인 후 단계별로 구현할 거야.
```