# PHASE 3: VERIFY

> 테스트 결과는 이 문서에만 기록합니다.
> 스코어링 로직은 PHASE1 S4 참조. KPI 이벤트는 PHASE0 S2 참조.

## 1. 검증 계층

### 계층 1: Code Quality

| 검증 항목 | 도구 | 기준 |
|----------|------|------|
| 단위 테스트 | Jest | 핵심 모듈 커버리지 >= 80% |
| 통합 테스트 | Jest + Supertest | API 엔드포인트 전수 검증 |
| E2E 테스트 | Playwright | 3단 퍼널 전체 흐름 |
| 타입체크 | TypeScript strict | 에러 0건 |
| 린트 | ESLint | 경고 0건 |

**스킬 참조**: `webapp-testing`

### 계층 2: Security + Compliance

| 검증 항목 | 방법 | 기준 |
|----------|------|------|
| 개인정보 비저장 감사 | DB/로그/APM 전수 스캔 | 위반 0건 |
| 중개 오인 문구 스캔 | 텍스트 검색 (금지 문구 목록) | 위반 0건 |
| 출처 표기 완전성 | 결과 페이지 전수 확인 | 누락 0건 |
| XSS/CSRF 방지 | 보안 헤더 + 입력 검증 감사 | Critical/High 0건 |
| HTTPS 적용 | 프로덕션 배포 후 확인 | 필수 |

**스킬 참조**: `security-review`

## 2. 커버리지 기준

| 범위 | 대상 모듈 | 커버리지 기준 |
|------|----------|-------------|
| 전체 | 프로젝트 전체 | >= 60% |
| 핵심 모듈 | 스코어링 엔진 (→ PHASE1 S4) | >= 80% |
| 핵심 모듈 | 예산 계산 모듈 | >= 80% |
| 핵심 모듈 | API Routes (`/api/recommend`) | >= 80% |
| 컴플라이언스 모듈 | 동의 UI (ConsentForm) | >= 80% |
| 컴플라이언스 모듈 | 면책 문구 (DisclaimerBanner) | >= 80% |
| 컴플라이언스 모듈 | 출처 표기 (SourceBadge) | >= 80% |

## 3. 완료 기준 (Exit Criteria)

| # | 항목 | 기준 | 상태 |
|---|------|------|------|
| 1 | 전체 커버리지 | >= 60% | pending |
| 2 | 핵심 모듈 커버리지 | >= 80% | pending |
| 3 | 컴플라이언스 모듈 커버리지 | >= 80% | pending |
| 4 | Critical/High 보안 이슈 | 0건 | pending |
| 5 | 개인정보 비저장 위반 | 0건 | pending |
| 6 | 중개 오인 문구 | 0건 | pending |
| 7 | 출처 표기 누락 | 0건 | pending |
| 8 | TypeScript strict 에러 | 0건 | pending |
| 9 | ESLint 경고 | 0건 | pending |
| 10 | E2E 퍼널 테스트 통과 | 전체 통과 | pending |

## 4. 테스트 결과 기록

> Phase 3 수행 후 아래 섹션에 결과를 기록합니다.

### 4.1 단위 테스트 결과

```
실행일:
총 테스트:
통과:
실패:
커버리지:
```

### 4.2 통합 테스트 결과

```
실행일:
총 테스트:
통과:
실패:
```

### 4.3 E2E 테스트 결과

```
실행일:
시나리오:
통과:
실패:
```

### 4.4 보안 감사 결과

```
실행일:
감사자: Claude Code (security-review 스킬)
Critical:
High:
Medium:
Low:
```

### 4.5 컴플라이언스 감사 결과

```
실행일:
개인정보 비저장 위반:
중개 오인 문구:
출처 표기 누락:
```

## 5. 에이전트 역할

- **Claude Code**: 보안 감사 수행 + 테스트 커버리지 분석 + 감사 결과 문서화
- **Codex**: 누락 테스트 보충 생성 (단위/통합/E2E)
