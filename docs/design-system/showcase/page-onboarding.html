<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>집콕신혼 디자인 시스템 — Onboarding</title>
  <link rel="stylesheet" href="../design-tokens.css">
  <link rel="stylesheet" href="showcase.css">
  <style>
    .ob-step { display: none; }
    .ob-step.active { display: block; }
    .ob-tab { padding: 6px 14px; border-radius: var(--radius-full); border: 1.5px solid var(--color-border); background: transparent; color: var(--color-on-surface); font-size: 12px; font-family: var(--font-sans); cursor: pointer; white-space: nowrap; transition: all var(--duration-fast) var(--ease-smooth); }
    .ob-tab.active { background: var(--color-brand-500); color: #FFF; border-color: var(--color-brand-500); }
    .ob-card { padding: var(--space-4); background: var(--color-surface); border: 1.5px solid var(--color-border); border-radius: var(--radius-xl); cursor: pointer; transition: all var(--duration-fast) var(--ease-smooth); text-align: center; }
    .ob-card:hover { border-color: var(--color-brand-400); }
    .ob-card.selected { border-color: var(--color-brand-500); background: var(--color-brand-50); position: relative; }
    .ob-card.selected::after { content: '✓'; position: absolute; top: 6px; right: 6px; width: 18px; height: 18px; border-radius: 50%; background: var(--color-brand-500); color: #FFF; font-size: 11px; display: flex; align-items: center; justify-content: center; }
    @keyframes obCardBounce { 0% { transform: scale(1); } 40% { transform: scale(1.05); } 100% { transform: scale(1); } }
    .ob-card.selecting { animation: obCardBounce 250ms var(--ease-spring); }
    .ob-quick-btn { padding: 6px 12px; border-radius: var(--radius-full); border: 1px solid var(--color-border); background: var(--color-surface); font-size: 12px; font-family: var(--font-sans); cursor: pointer; }
    .ob-quick-btn:hover { border-color: var(--color-brand-400); }
    @keyframes analysisFade { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
    .analysis-step { opacity: 0; }
    .analysis-step.show { animation: analysisFade 0.5s var(--ease-out-expo) forwards; }
  </style>
</head>
<body>
  <div class="showcase-layout">
    <header class="showcase-header">
      <button class="menu-toggle" onclick="toggleSidebar()">☰</button>
      <h1>집콕신혼 디자인 시스템</h1>
      <button class="theme-toggle" id="themeBtn" onclick="toggleDark()"></button>
    </header>
    <nav class="showcase-sidebar" id="sidebar"></nav>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <main class="showcase-content">

      <h1 class="section-header">Onboarding (/search)</h1>
      <p class="section-desc">§4.3 — Step 1~5 전체 온보딩 플로우. 탭으로 각 스텝 전환.</p>

      <!-- Step selector tabs -->
      <div style="display:flex;gap:var(--space-2);margin-bottom:var(--space-4);flex-wrap:wrap;">
        <button class="ob-tab active" onclick="showObStep(0)">Step 0</button>
        <button class="ob-tab" onclick="showObStep(1)">Step 1</button>
        <button class="ob-tab" onclick="showObStep(2)">Step 2</button>
        <button class="ob-tab" onclick="showObStep(3)">Step 3</button>
        <button class="ob-tab" onclick="showObStep(4)">Step 4</button>
        <button class="ob-tab" onclick="showObStep(5)">Step 5</button>
      </div>

      <div class="phone-frame">
        <!-- Status bar -->
        <div data-status-bar></div>

        <!-- Header with back -->
        <div style="display:flex;align-items:center;padding:var(--space-3) var(--space-4);gap:var(--space-3);">
          <span style="cursor:pointer;display:inline-flex;"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><polyline points="12 19 5 12 12 5"/></svg></span>
          <span style="font-size:var(--text-body-sm);font-weight:600;flex:1;">조건 입력</span>
        </div>

        <!-- Progress bar -->
        <div id="obProgress" style="padding:0 var(--space-4);margin-bottom:var(--space-6);">
          <!-- JS fills this -->
        </div>

        <!-- ===== Step 0: 동의 ===== -->
        <div class="ob-step active" id="obStep0">
          <div style="padding:0 var(--space-4);flex:1;">
            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">시작하기 전에</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">분석에 필요한 정보 수집 동의가 필요합니다</div>

            <div style="display:flex;flex-direction:column;gap:var(--space-3);margin-bottom:var(--space-4);">
              <label style="display:flex;align-items:flex-start;gap:var(--space-3);cursor:pointer;">
                <input type="checkbox" checked style="margin-top:3px;accent-color:var(--color-brand-500);width:18px;height:18px;">
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">[필수] 개인정보 수집·이용 동의</div>
                  <div style="font-size:11px;color:var(--color-on-surface-muted);">직장 권역, 예산 범위 · 세션 종료 시 즉시 삭제</div>
                </div>
              </label>
              <label style="display:flex;align-items:flex-start;gap:var(--space-3);cursor:pointer;">
                <input type="checkbox" checked style="margin-top:3px;accent-color:var(--color-brand-500);width:18px;height:18px;">
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">[필수] 위치정보 이용 동의</div>
                  <div style="font-size:11px;color:var(--color-on-surface-muted);">직장 주소 → 좌표 변환 · 좌표 미저장</div>
                </div>
              </label>
              <label style="display:flex;align-items:flex-start;gap:var(--space-3);cursor:pointer;">
                <input type="checkbox" style="margin-top:3px;accent-color:var(--color-brand-500);width:18px;height:18px;">
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">[선택] 정밀 분석 추가 동의</div>
                  <div style="font-size:11px;color:var(--color-on-surface-muted);">보유 현금, 상세 소득 · 세션 종료 시 즉시 삭제</div>
                </div>
              </label>
            </div>

            <div style="padding:var(--space-3);background:var(--color-brand-50);border-radius:var(--radius-lg);border:1px solid var(--color-brand-200);margin-bottom:var(--space-4);">
              <div style="font-size:var(--text-body-sm);display:flex;align-items:center;gap:var(--space-2);">
                <span class="score-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span>
                <div>
                  <div style="font-weight:600;color:var(--color-brand-700);">입력 정보는 분석 후 즉시 삭제됩니다</div>
                  <div style="font-size:11px;color:var(--color-brand-600);margin-top:2px;">서버에 저장되지 않으며 세션 종료 시 완전 삭제</div>
                </div>
              </div>
            </div>
          </div>
          <div style="padding:var(--space-4);border-top:1px solid var(--color-border);background:var(--color-surface);">
            <button class="btn btn-primary" style="width:100%;padding:var(--space-4);font-size:var(--text-body);font-weight:700;">동의하고 시작하기</button>
          </div>
        </div>

        <!-- ===== Step 1: 주거형태 + 자녀계획 ===== -->
        <div class="ob-step" id="obStep1">
          <div style="padding:0 var(--space-4);flex:1;">
            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">어떤 형태를 찾고 계세요?</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">선호하는 주거 형태를 선택해주세요</div>

            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:var(--space-3);margin-bottom:var(--space-6);">
              <div class="ob-card selected">
                <div style="margin-bottom:var(--space-2);color:var(--color-brand-500);"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
                <div style="font-size:var(--text-body-sm);font-weight:600;">매매</div>
              </div>
              <div class="ob-card">
                <div style="margin-bottom:var(--space-2);color:var(--color-brand-500);"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg></div>
                <div style="font-size:var(--text-body-sm);font-weight:600;">전세</div>
              </div>
              <div class="ob-card">
                <div style="margin-bottom:var(--space-2);color:var(--color-brand-500);"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg></div>
                <div style="font-size:var(--text-body-sm);font-weight:600;">월세</div>
              </div>
            </div>

            <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-3);">자녀 계획</div>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:var(--space-3);margin-bottom:var(--space-6);">
              <div class="ob-card">
                <div style="font-size:var(--text-body-sm);font-weight:600;">계획 없음</div>
              </div>
              <div class="ob-card selected">
                <div style="font-size:var(--text-body-sm);font-weight:600;">1~2년 내</div>
              </div>
              <div class="ob-card">
                <div style="font-size:var(--text-body-sm);font-weight:600;">이미 있음</div>
              </div>
            </div>

            <div style="font-size:var(--text-caption);color:var(--color-brand-600);display:flex;align-items:center;gap:4px;">
              <span class="score-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> 입력 정보는 분석 후 즉시 삭제됩니다
            </div>
          </div>
          <div style="padding:var(--space-4);border-top:1px solid var(--color-border);background:var(--color-surface);">
            <button class="btn btn-primary" style="width:100%;padding:var(--space-4);font-size:var(--text-body);font-weight:700;">다음</button>
          </div>
        </div>

        <!-- ===== Step 2: 직장 주소 입력 ===== -->
        <div class="ob-step" id="obStep2">
          <div style="padding:0 var(--space-4);flex:1;">
            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">직장 주소를 입력해주세요</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">대중교통 통근 시간을 분석합니다</div>

            <div style="margin-bottom:var(--space-4);">
              <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-2);">직장 1 (필수)</div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-brand-500);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="margin-right:var(--space-2);color:var(--color-on-surface-muted);display:inline-flex;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
                <span style="font-size:var(--text-body);color:var(--color-on-surface);">삼성역</span>
              </div>
            </div>

            <div style="margin-bottom:var(--space-4);">
              <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-2);">직장 2 (선택)</div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="margin-right:var(--space-2);color:var(--color-neutral-300);display:inline-flex;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
                <span style="font-size:var(--text-body);color:var(--color-neutral-400);">두 번째 직장은 선택사항입니다</span>
              </div>
            </div>

            <label style="display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-4);cursor:pointer;">
              <input type="checkbox" style="accent-color:var(--color-brand-500);width:16px;height:16px;">
              <span style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);">외벌이예요 (배우자 직장 없음)</span>
            </label>

            <div style="font-size:var(--text-caption);color:var(--color-brand-600);display:flex;align-items:center;gap:4px;">
              <span class="score-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> 입력 정보는 분석 후 즉시 삭제됩니다
            </div>
          </div>
          <div style="padding:var(--space-4);border-top:1px solid var(--color-border);background:var(--color-surface);">
            <button class="btn btn-primary" style="width:100%;padding:var(--space-4);font-size:var(--text-body);font-weight:700;">다음</button>
          </div>
        </div>

        <!-- ===== Step 3: 합산 연봉 + 보유 현금 ===== -->
        <div class="ob-step" id="obStep3">
          <div style="padding:0 var(--space-4);flex:1;">
            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">예산 정보를 알려주세요</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">적정 예산 범위를 분석합니다</div>

            <div style="margin-bottom:var(--space-5);">
              <div style="display:flex;align-items:center;gap:var(--space-2);margin-bottom:var(--space-2);">
                <span style="font-size:var(--text-body-sm);font-weight:600;">부부 합산 연봉</span>
                <button class="why-tooltip-trigger" onclick="toggleTooltip('obWhyIncome')">? 왜 필요한가요?</button>
              </div>
              <div class="tooltip-popup" id="obWhyIncome" style="margin-bottom:var(--space-2);">
                소득 정보는 PIR(가격소득비)와 DTI 계산에 사용됩니다. 세션 종료 시 즉시 삭제됩니다.
              </div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-brand-500);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="font-size:var(--text-body);font-weight:600;color:var(--color-on-surface);">7,000</span>
                <span style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-left:auto;">만원</span>
              </div>
              <div class="korean-amount">7,000만원</div>
              <div style="display:flex;gap:var(--space-2);margin-top:var(--space-2);flex-wrap:wrap;">
                <button class="ob-quick-btn">5,000만</button>
                <button class="ob-quick-btn">7,000만</button>
                <button class="ob-quick-btn">1억</button>
                <button class="ob-quick-btn">1.5억</button>
              </div>
            </div>

            <div style="margin-bottom:var(--space-6);">
              <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-2);">보유 현금 (자기자본)</div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="font-size:var(--text-body);font-weight:600;color:var(--color-on-surface);">15,000</span>
                <span style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-left:auto;">만원</span>
              </div>
              <div class="korean-amount">1억 5,000만원</div>
              <div style="display:flex;gap:var(--space-2);margin-top:var(--space-2);flex-wrap:wrap;">
                <button class="ob-quick-btn">5,000만</button>
                <button class="ob-quick-btn">1억</button>
                <button class="ob-quick-btn">1.5억</button>
                <button class="ob-quick-btn">2억</button>
              </div>
            </div>

            <div style="font-size:var(--text-caption);color:var(--color-brand-600);display:flex;align-items:center;gap:4px;">
              <span class="score-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> 입력 정보는 분석 후 즉시 삭제됩니다
            </div>
          </div>
          <div style="padding:var(--space-4);border-top:1px solid var(--color-border);background:var(--color-surface);">
            <button class="btn btn-primary" style="width:100%;padding:var(--space-4);font-size:var(--text-body);font-weight:700;">다음</button>
          </div>
        </div>

        <!-- ===== Step 4: 기존 대출 + 월 주거비 ===== -->
        <div class="ob-step" id="obStep4">
          <div style="padding:0 var(--space-4);flex:1;">
            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">현재 대출이 있으신가요?</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">DSR 한도를 분석합니다 (없으면 0 입력)</div>

            <div style="margin-bottom:var(--space-5);">
              <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-2);">기존 대출 잔액</div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="font-size:var(--text-body);font-weight:600;color:var(--color-on-surface);">3,000</span>
                <span style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-left:auto;">만원</span>
              </div>
              <div style="display:flex;gap:var(--space-2);margin-top:var(--space-2);flex-wrap:wrap;">
                <button class="ob-quick-btn">없음</button>
                <button class="ob-quick-btn">3,000만</button>
                <button class="ob-quick-btn">5,000만</button>
                <button class="ob-quick-btn">1억</button>
              </div>
            </div>

            <div style="margin-bottom:var(--space-6);">
              <div style="font-size:var(--text-body-sm);font-weight:600;margin-bottom:var(--space-2);">희망 월 주거비 상한</div>
              <div style="display:flex;align-items:center;border:1.5px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-3) var(--space-4);background:var(--color-surface);">
                <span style="font-size:var(--text-body);font-weight:600;color:var(--color-on-surface);">120</span>
                <span style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-left:auto;">만원/월</span>
              </div>
              <div style="display:flex;gap:var(--space-2);margin-top:var(--space-2);flex-wrap:wrap;">
                <button class="ob-quick-btn">80만</button>
                <button class="ob-quick-btn">100만</button>
                <button class="ob-quick-btn">120만</button>
                <button class="ob-quick-btn">150만</button>
              </div>
            </div>

            <div style="font-size:var(--text-caption);color:var(--color-brand-600);display:flex;align-items:center;gap:4px;">
              <span class="score-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> 입력 정보는 분석 후 즉시 삭제됩니다
            </div>
          </div>
          <div style="padding:var(--space-4);border-top:1px solid var(--color-border);background:var(--color-surface);">
            <button class="btn btn-primary" style="width:100%;padding:var(--space-4);font-size:var(--text-body);font-weight:700;" onclick="showObStep(5)">분석 시작하기</button>
          </div>
        </div>

        <!-- ===== Step 5: 분석 중 시퀀스 (고도화) ===== -->
        <div class="ob-step" id="obStep5">
          <div style="padding:var(--space-6) var(--space-4);text-align:center;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:500px;">
            <!-- Circular Progress Ring -->
            <div class="analysis-progress-ring" style="margin-bottom:var(--space-4);">
              <svg width="120" height="120" viewBox="0 0 120 120">
                <circle class="ring-track" cx="60" cy="60" r="52"/>
                <circle class="ring-fill" cx="60" cy="60" r="52" id="analysisRing"
                  stroke-dasharray="326.73"
                  style="stroke-dashoffset:326.73;"/>
              </svg>
              <div class="ring-text" id="analysisPercent">0%</div>
            </div>

            <div style="font-size:var(--text-title);font-weight:var(--text-title-weight);margin-bottom:var(--space-2);">분석 중입니다</div>
            <div style="font-size:var(--text-body-sm);color:var(--color-on-surface-muted);margin-bottom:var(--space-6);">입력하신 조건으로 맞춤 단지를 찾고 있어요</div>

            <div style="display:flex;flex-direction:column;gap:var(--space-4);text-align:left;width:100%;max-width:280px;">
              <div class="analysis-step" id="aStep1" style="display:flex;align-items:center;gap:var(--space-3);">
                <span class="score-icon" id="aIcon1"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4z"/></svg></span>
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">예산 범위 분석</div>
                  <div style="font-size:var(--text-caption);color:var(--color-on-surface-muted);">DSR, 자기자본 기반 한도 계산</div>
                </div>
              </div>
              <div class="analysis-step" id="aStep2" style="display:flex;align-items:center;gap:var(--space-3);">
                <span class="score-icon" id="aIcon2"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="3" width="16" height="16" rx="2"/><path d="M4 11h16"/><path d="M12 3v8"/><path d="m8 19-2 3"/><path d="m18 22-2-3"/><circle cx="9" cy="15" r="1"/><circle cx="15" cy="15" r="1"/></svg></span>
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">통근 경로 분석</div>
                  <div style="font-size:var(--text-caption);color:var(--color-on-surface-muted);">대중교통 최적 경로 탐색</div>
                </div>
              </div>
              <div class="analysis-step" id="aStep3" style="display:flex;align-items:center;gap:var(--space-3);">
                <span class="score-icon" id="aIcon3"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></span>
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">생활 환경 평가</div>
                  <div style="font-size:var(--text-caption);color:var(--color-on-surface-muted);">보육 / 안전 시설 반경 분석</div>
                </div>
              </div>
              <div class="analysis-step" id="aStep4" style="display:flex;align-items:center;gap:var(--space-3);">
                <span class="score-icon" id="aIcon4"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg></span>
                <div>
                  <div style="font-size:var(--text-body-sm);font-weight:600;">종합 점수 산출</div>
                  <div style="font-size:var(--text-caption);color:var(--color-on-surface-muted);">4개 카테고리 가중 평균</div>
                </div>
              </div>
            </div>

            <div id="analysisDoneBtn" style="margin-top:var(--space-6);display:none;">
              <a href="page-results.html" class="btn btn-primary" style="padding:var(--space-3) var(--space-6);font-size:var(--text-body);font-weight:700;text-decoration:none;">결과 보기</a>
            </div>
          </div>
        </div>
      </div>

    </main>
    <button class="fullscreen-toggle" id="fullscreenBtn" onclick="toggleFullscreen()"></button>
  </div>
  <script src="showcase.js"></script>
  <script>
    var currentObStep = 0;

    function showObStep(step) {
      currentObStep = step;
      for (var i = 0; i <= 5; i++) {
        var el = document.getElementById('obStep' + i);
        if (el) el.classList.toggle('active', i === step);
      }
      // Update tabs (tab index matches step number directly)
      var tabs = document.querySelectorAll('.ob-tab');
      for (var j = 0; j < tabs.length; j++) {
        tabs[j].classList.toggle('active', j === step);
      }
      updateProgress(step);

      // If step 5, start analysis animation
      if (step === 5) startAnalysisSequence();
    }

    function updateProgress(step) {
      // Step 0 is consent — hide progress bar
      if (step === 0) {
        document.getElementById('obProgress').innerHTML = '<div style="font-size:11px;color:var(--color-on-surface-muted);text-align:center;">서비스 이용 동의</div>';
        return;
      }
      var html = '<div style="display:flex;align-items:center;gap:0;margin-bottom:var(--space-2);">';
      for (var i = 1; i <= 4; i++) {
        var bg, color, text;
        if (i < step || step === 5) { bg = 'var(--color-brand-500)'; color = '#FFF'; text = '\u2713'; }
        else if (i === step) { bg = 'var(--color-brand-500)'; color = '#FFF'; text = i; }
        else { bg = 'var(--color-neutral-200)'; color = 'var(--color-on-surface-muted)'; text = i; }
        html += '<div style="display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:' + bg + ';color:' + color + ';font-size:11px;font-weight:700;">' + text + '</div>';
        if (i < 4) {
          var lineBg = (i < step || step === 5) ? 'var(--color-brand-500)' : 'var(--color-neutral-200)';
          html += '<div style="flex:1;height:2px;background:' + lineBg + ';"></div>';
        }
      }
      html += '</div>';
      var stepLabel = step <= 4 ? 'Step ' + step + ' of 4' : '\uBD84\uC11D \uC911...';
      var stepNames = ['', '\uC8FC\uAC70 \uD615\uD0DC', '\uCD9C\uD1F4\uADFC \uC815\uBCF4', '\uC608\uC0B0 \uC815\uBCF4', '\uB300\uCD9C \uC815\uBCF4', '\uBD84\uC11D \uC911'];
      html += '<div style="font-size:11px;color:var(--color-on-surface-muted);text-align:center;">' + stepLabel + ' \xB7 ' + stepNames[step] + '</div>';
      document.getElementById('obProgress').innerHTML = html;
    }

    function startAnalysisSequence() {
      var steps = ['aStep1', 'aStep2', 'aStep3', 'aStep4'];
      var icons = ['aIcon1', 'aIcon2', 'aIcon3', 'aIcon4'];
      var ring = document.getElementById('analysisRing');
      var pct = document.getElementById('analysisPercent');
      var doneBtn = document.getElementById('analysisDoneBtn');
      var circumference = 326.73;

      // Reset
      for (var i = 0; i < steps.length; i++) {
        document.getElementById(steps[i]).classList.remove('show');
        // Reset icons
        var iconEl = document.getElementById(icons[i]);
        if (i === 0 && iconEl) iconEl.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4z"/></svg>';
        if (i === 1 && iconEl) iconEl.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="3" width="16" height="16" rx="2"/><path d="M4 11h16"/><path d="M12 3v8"/></svg>';
        if (i === 2 && iconEl) iconEl.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>';
        if (i === 3 && iconEl) iconEl.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21"/></svg>';
      }
      if (ring) ring.style.strokeDashoffset = circumference;
      if (pct) pct.textContent = '0%';
      if (doneBtn) doneBtn.style.display = 'none';

      var percents = [25, 50, 75, 100];
      for (var j = 0; j < steps.length; j++) {
        (function(idx) {
          setTimeout(function() {
            document.getElementById(steps[idx]).classList.add('show');
            // Update ring progress
            var offset = circumference - (circumference * percents[idx] / 100);
            if (ring) ring.style.strokeDashoffset = offset;
            if (pct) pct.textContent = percents[idx] + '%';
            // Mark previous steps as done
            for (var k = 0; k < idx; k++) {
              var prevIcon = document.getElementById(icons[k]);
              if (prevIcon) prevIcon.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';
            }
            // On last step, show done button
            if (idx === steps.length - 1) {
              setTimeout(function() {
                var lastIcon = document.getElementById(icons[steps.length - 1]);
                if (lastIcon) lastIcon.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#059669" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';
                if (doneBtn) doneBtn.style.display = 'block';
              }, 600);
            }
          }, (idx + 1) * 800);
        })(j);
      }
    }

    // Initial progress render
    document.addEventListener('DOMContentLoaded', function() {
      updateProgress(0);
    });
  </script>
</body>
</html>
